<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chat UI</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 h-screen flex items-center justify-center p-4">
  <div class="w-full max-w-2xl h-[600px] bg-gray-800 rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-white/10">
    <!-- Header -->
    <div class="p-4 bg-gray-700/50 backdrop-blur-md border-b border-white/10 flex items-center gap-3">
      <div class="w-3 h-3 bg-red-500 rounded-full"></div>
      <div class="w-3 h-3 bg-yellow-400 rounded-full"></div>
      <div class="w-3 h-3 bg-green-500 rounded-full"></div>
      <h1 class="text-white font-semibold ml-4">Chat</h1>
    </div>

    <!-- Messages -->
    <div id="messages" class="flex-1 overflow-y-auto p-4 space-y-4">
      <div class="flex justify-start">
        <div class="bg-gray-700 text-white p-3 rounded-xl max-w-[75%]">Olá! Como posso ajudar?</div>
      </div>
      <div class="flex justify-end">
        <div class="bg-purple-600 text-white p-3 rounded-xl max-w-[75%]">Quero simular uma interface de chat.</div>
      </div>
    </div>

    <!-- Input area -->
    <div class="p-4 bg-gray-800/60 backdrop-blur-md border-t border-white/10 flex items-center gap-3">
      <input id="chatInput" type="text" placeholder="Digite uma mensagem..." class="flex-1 h-12 px-4 rounded-xl bg-gray-700 text-white placeholder-gray-400 border border-white/20 focus:outline-none focus:ring-2 focus:ring-purple-500" />
      <button id="sendBtn" class="h-12 px-6 bg-purple-600 hover:bg-purple-700 transition text-white rounded-xl font-semibold">Enviar</button>
    </div>
  </div>

  <script>
    const input = document.getElementById('chatInput');
    const btn = document.getElementById('sendBtn');
    const messages = document.getElementById('messages');

    function sendMessage() {
      const text = input.value.trim();
      if (!text) return;

      const bubble = document.createElement('div');
      bubble.className = 'flex justify-end';
      bubble.innerHTML = `<div class="bg-purple-600 text-white p-3 rounded-xl max-w-[75%]">${text}</div>`;
      messages.appendChild(bubble);

      input.value = '';
      messages.scrollTop = messages.scrollHeight;
    }

    btn.addEventListener('click', sendMessage);
    input.addEventListener('input', () => {
      const val = input.value.trim().toLowerCase();
      if (!val) { box.classList.add('hidden'); return; }

      const results = trie.search(val).slice(0,3);

      // Se não houver resultados, esconder totalmente
      if (results.length === 0) {
        box.classList.add('hidden');
        w1.textContent = "";
        w2.textContent = "";
        w3.textContent = "";
        return;
      }

      w1.textContent = results[0] || "";
      w2.textContent = results[1] || "";
      w3.textContent = results[2] || "";

      box.classList.remove('hidden');
    });('keydown', e => { if (e.key === 'Enter') sendMessage(); });
  </script>
  <!-- Autocomplete box -->
  <div id="autoBox" class="absolute bottom-28 w-full max-w-2xl px-4 hidden">
    <div class="bg-gray-700/80 backdrop-blur-md text-white rounded-xl shadow-xl border border-white/10 flex divide-x divide-white/10">
      <div id="word1" class="flex-1 p-3 hover:bg-gray-600 cursor-pointer"></div>
      <div id="word2" class="flex-1 p-3 hover:bg-gray-600 cursor-pointer"></div>
      <div id="word3" class="flex-1 p-3 hover:bg-gray-600 cursor-pointer"></div>
    </div>
  </div>

  <script>
    const words = ["abacate","abacaxi","acerola","amora","banana","cajá","caju","coco","damasco","figo","goiaba","graviola","jaca","jabuticaba","kiwi","laranja","limão","maçã","mamão","manga","maracujá","melancia","melão","morango","pera","pêssego","pitanga","roma","tangerina","uva"]; // reduzida para exemplo

    const box = document.getElementById('autoBox');
    const w1 = document.getElementById('word1');
    const w2 = document.getElementById('word2');
    const w3 = document.getElementById('word3');

    class TrieNode { constructor(){ this.children={}; this.end=false; } }
    class Trie {
      constructor(){ this.root=new TrieNode(); }
      insert(word){ let n=this.root; for(const c of word){ if(!n.children[c]) n.children[c]=new TrieNode(); n=n.children[c]; } n.end=true; }
      search(pref){ let n=this.root; for(const c of pref){ if(!n.children[c]) return []; n=n.children[c]; } return this.collect(n,pref); }
      collect(node,prefix){ let out=[]; if(node.end) out.push(prefix); for(const c in node.children) out=out.concat(this.collect(node.children[c],prefix+c)); return out; }
    }

    const trie = new Trie();
    words.forEach(w => trie.insert(w.toLowerCase()));

    input.addEventListener('input', () => {
      const val = input.value.trim().toLowerCase();
      if (!val) { box.classList.add('hidden'); return; }

      const results = trie.search(val).slice(0,3);
      w1.textContent = results[0] || "";
      w2.textContent = results[1] || "";
      w3.textContent = results[2] || "";

      box.classList.remove('hidden');
    });

    [w1,w2,w3].forEach(w => {
      w.addEventListener('click', () => {
        if (w.textContent.trim()) {
          input.value = w.textContent;
          box.classList.add('hidden');
        }
      });
    });
  </script>
</body>
</html>
